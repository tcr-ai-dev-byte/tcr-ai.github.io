<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TCR.AI â€“ Coming Soon</title>

  <!-- VerknÃ¼pfung mit dem CSS-Design -->
  <link rel="stylesheet" href="style.css" />

  <!-- Optionales kleines Tab-Symbol -->
  <link rel="icon" href="favicon.ico" />
</head>

<body>
  <div class="container">
    <!-- HauptÃ¼berschrift -->
    <h1>TCR.<span>AI</span></h1>

    <!-- Slogan -->
    <p class="tagline">Kleine KI. Klare Antworten.</p>

    <!-- Statusinfo -->
    <p class="status">ðŸš§ Website im Aufbau ðŸš§</p>

    <!-- Social-Links -->
    <div class="links">
      <a href="https://github.com/tcr-ai" target="_blank">GitHub</a>
      <a href="mailto:tcrai.dev@gmail.com">Kontakt</a>
    </div>

    <!-- --- Demo-Button + Ausgabe --- -->
    <div class="demo-section">
      <button id="demo">Demo starten</button>
      <pre id="output"></pre>
    </div>
  </div> <!-- Ende container -->

<script>
  const API_BASE = "http://127.0.0.1:8000";

  const form = document.getElementById("chat-form");
  const input = document.getElementById("user-input");    // <textarea id="user-input">
  const btn   = document.getElementById("send-btn");       // <button id="send-btn">
  const out   = document.getElementById("output");         // <pre id="output">

  function setLoading(isLoading){
    if(!btn) return;
    btn.disabled = isLoading;
    btn.textContent = isLoading ? "Senden â€¦" : "Senden";
  }

  async function askBackend(prompt){
    const res = await fetch(`${API_BASE}/generate`, {
      method: "POST",
      headers: {"Content-Type": "application/json"},
      body: JSON.stringify({ prompt })
    });
    if(!res.ok){
      const txt = await res.text().catch(()=> "");
      throw new Error(`HTTP ${res.status}: ${txt}`);
    }
    return res.json();
  }

  async function handleSubmit(e){
    e?.preventDefault();
    const prompt = (input?.value || "").trim();
    if(!prompt){ return; }

    setLoading(true);
    out.textContent = "TCR.AI denkt â€¦";

    try{
      const data = await askBackend(prompt);
      const used = data.used_context ? " (mit Wissensbasis)" : "";
      out.textContent = `${data.response}${used}`;
    }catch(err){
      out.textContent = `Fehler: ${err.message}`;
    }finally{
      setLoading(false);
    }
  }

  // Events
  form?.addEventListener("submit", handleSubmit);
  btn?.addEventListener("click", handleSubmit);
</script>


</body>
</html>

